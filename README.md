
# Домашнее задание: Алгоритмы и структуры данных

## Форматы входных и выходных данных 
**Входные данные**  

Входной файл содержит последовательность команд, то есть представляет набор строк вида:  
command [key][data],  
где command — add, delete, search, min, max, print или спец. команда;   
key — ключ, целое число (используется для красно-черного дерева);  
data — данные, целое число.

**Выходные данные**
Последовательный вывод результата выполнения всех команд  
Для команды print:
+ Красно-черное дерево: Вывод содержимого вершин в формате: 
{'parent': key, 'color': value, 'key': value, 'data': value, 'left': key, 'right': key} по уровням слева направо. Если вершина отсутствует, то и запись вместе с ней. Если отсутствует какое-либо значение, то на месте его значения стоит float('nan'). 
+ vEB-дерево: Вывод содержимого вершин по уровням слева направо. Формат вывода для небазовой вершины:
{'U': value, 'min': value, 'max': value}

## Теоретическая часть: Дерево ван Эмде Боаса

Дерево ван Эмде Боаса (vEB tree) — ассоциативный массив, который позволяет хранить целые числа в диапазоне [0; U), где U = ![equation](http://latex.codecogs.com/gif.latex?2%5E%7Bk%7D), и осуществлять над ними все соответствующие дереву поиска операции.

### Структура
**Структура дерева ван Эмде Боаса**
1. Root - Корень дерева

**Атрибуты узла дерева ван Эмде Боаса**
1. Min - минимальное значение дерева, корнем которого является данный узел (более нигде не хранится)
2. Max - максимальное значение дерева, корнем которого является данный узел 
3. Summary - вспомогательное дерево, хранящее информацию о детях текущего узла
4. Cluster - массив, хранящий указатели на детей узла
5. U - число элементов, хранящееся в дереве, корнем которого является текущий узел  

![equation](http://www.imageup.ru/img16/3224154/veb.png)  

Следует сказать, что минимальное значение, которое может принимать U, является 2.  

### Вспомогательные функции

Для реализации некоторых операций над деревом необходимо ввести вспомогательные функции.
+ *high(x)* — число, указывающее номер кластера х
+ *low(x)* — число, указывающее позицию х в его кластере
+ *index(x, y)* — число, соответствующее номеру элемента х

### Использование структуры данных
+ Хранение целых неотрицательных чисел в ограниченном диапазоне и их поиск
+ Сортировка последовательности
+ Нахождение наидлиннейшей возрастающей подпоследовательности
+ Алгоритм Дейкстры


### Операции над деревом ван Эмде Боаса

**isMember**  
Проверка на наличие в структуре  
![equation](http://www.imageup.ru/img16/3224003/vebmember-2.png)  

**isEmpty**  
![equation](http://www.imageup.ru/img16/3224008/vebempty-1.png)  

**Min, Max**  

Минимальное и максимальное значения хранятся в дереве отдельно, поэтому данные операции не требуют ничего, кроме вывода значения поля min или max в соответствии с запросом.  

**Add**  
Вставка элемента  
![equation](http://www.imageup.ru/img16/3224071/vebinsert-1.png)

**Delete**  
Удаление элемента  
Пусть в структуре находится элемент, который требуется удалить  
![equation](http://www.imageup.ru/img16/3224092/vebdelete.png)

**Next**  
Поиск следующего по величине элемента, находящегося в дереве  

![equation](http://www.imageup.ru/img16/3224022/vebsuccessor.png)  

**Prev**  
Поиск предыдущего по величине элемента, находящегося в дереве  

![equation](http://www.imageup.ru/img16/3224028/vebpredecessor.png)  

## Теоретическая часть: Красно-Черное Дерево
**Красно-черное дерево** - бинарное дерево поиска с одним дополнительным битом цвета в каждом узле.

### Свойства красно-черного дерева
1. Каждый узел является либо красным, либо черным.  
2. Корень дерева является черным узлом.  
3. Каждый лист дерева является черным узлом.  
4. Если узел красный, то оба его дочерних узла черные.  
5. Для каждого узла все простые пути от него до листьев, являющихся потомками данного узла, содержат одно и то же количество черных узлов.

### Структура
**Структура красно-черного дерева**
1. Root - Корень дерева
2. Count - Количество узлов в дереве

**Атрибуты узла красно-черного дерева**
1. Сolor  - цвет узла
2. Key  - ключ
3. Left  - левый ребенок
4. Right - правый ребенок  
5. P - родитель  
 
 ![equation](http://www.imageup.ru/img16/3224156/rbtstr.png)  
 В данном задании функцию key будет выполнять арибут data (хранение даннх). Key-атрибут будет использоваться как идентификатор вершины.

### Использование структуры данных
Используется для доступа к большому (но не очень) количеству данных, так как имеет эффективный способ поиска узлов с относительно небольшими накладными расходами на вставку и удаление. Примеры: реализация небольшой БД, реализации ассоциативного массива

### Операции над деревом
 
**Add**  
Вставка элемента  
![equation](http://www.imageup.ru/img146/3206061/rbtinserteasy.png)  
  
**Delete**  
Удаление элемента  
![equation](http://www.imageup.ru/img146/3206172/rbtdeleteeasy.png)  
  
**Search**  
Поиск элемента  
![equation](http://www.imageup.ru/img146/3205705/rbtfind.png)  
  
**InfixTraverse, PrefixTraverse, PostfixTraverse**  
INFIX_TRAVERSE — обойти всё дерево, следуя порядку (левое поддерево, вершина, правое поддерево).  
PREFIX_TRAVERSE — обойти всё дерево, следуя порядку (вершина, левое поддерево, правое поддерево).  
POSTFIX_TRAVERSE — обойти всё дерево, следуя порядку (левое поддерево, правое поддерево', вершина).  
На изображении приведен алгоритм INFIX_TRAVERSE  
![equation](http://www.imageup.ru/img146/3206342/rbtinfixtrav.png)  
  
**Min**  
![equation](http://www.imageup.ru/img146/3206355/rbtmineasy.png)  
  
**Max**  
![equation](http://www.imageup.ru/img146/3206351/rbtmaxeasy.png)  
  
**Next, Prev**  
Процедура Prev симметрична процедуре Next   
На изображении приведен алгоритм Next  
![equation](http://www.imageup.ru/img146/3206358/rbtsuccessor.png)

### Некоторые функции, необходимые для работы операций красно-черного дерева

**LeftRotate, RightRotate**  
На данном изображении представлен случай для LeftRotate. RightRotate выполняется зеркально.  
![equation](http://www.imageup.ru/img146/3206167/rbtleftroteasy.png)  
  
**InsertFixup**  
![equation](http://www.imageup.ru/img146/3206160/rbtfixinserteasy.png)  

**Transplant**  
![equation](http://www.imageup.ru/img146/3206168/rbttransplanteasy.png)  
  
**RemoveFixup**  
![equation](http://www.imageup.ru/img146/3206180/rbtfixdeleteeasy.png)  
